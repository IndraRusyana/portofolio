# Gunakan image Node.js versi ringan
FROM node:18-alpine

# Set folder kerja di dalam container
WORKDIR /app

# Copy package.json dan install dependencies
COPY package.json ./
RUN npm install --production

# Copy semua kode source
COPY . .

# Cloud Run secara default menggunakan port 8080
# Pastikan kode backend Anda mendengarkan process.env.PORT
ENV PORT=8080

# Buka port 8080
EXPOSE 8080

# Jalankan aplikasi
CMD [ "node", "index.js" ]